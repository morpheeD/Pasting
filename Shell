awk '
/^[[:space:]]*(resource|data|module|variable|output)[[:space:]]+("[^"]+"[[:space:]]+)?("clone")[[:space:]]*{/ {
    in_block=1
    nb_open=0
}
in_block {
    # Compte les { et }
    nb_open += gsub(/{/, "{")
    nb_open -= gsub(/}/, "}")
    print "# " $0
    if (nb_open == 0) in_block=0
    next
}
{ print }
' fichier.tf > fichier_commente.tf
